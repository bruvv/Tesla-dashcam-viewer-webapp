# TeslaCam Viewer

TeslaCam Viewer is a progressive web app for exploring Tesla dashcam and Sentry footage directly from the USB drive. It groups recordings by event, surfaces metadata such as trigger reason and location, and provides a Tesla-style multi-camera player with a primary spotlight view. What better then having a screenshot?
<img width="1720" height="949" alt="image" src="https://github.com/user-attachments/assets/151bf4e3-1b7f-4ac0-b7cb-f4a850e71981" />


## Project Layout

- `index.html` – Vite entry point wiring the PWA shell.
- `src/` – Front-end logic and styles. `main.js` contains the TeslaCam ingestion, viewer state, and File System Access handling; `style.css` defines the responsive UI and multi-camera layout.
- `public/` – PWA assets (`manifest.webmanifest`, `sw.js`, and install icons).
- `dist/` – Build output generated by `npm run build`.

## Environment & Commands

Use Node.js 18 or newer (the repo has been exercised with Homebrew Node 24):

```bash
npm install
npm run dev -- --host
npm run build
```

The dev server publishes on `http://127.0.0.1:5173` unless you override the host/port flags. `npm run build` emits a production bundle with sourcemaps.

## Loading Footage

1. **Preferred (Chromium desktop)** – Click **Connect Drive** and grant access to the `TeslaCam` directory when prompted. Brave requires enabling `brave://flags/#file-system-access-api` and allowing File System Access in site settings.
2. **Fallback** – Use **Upload Folder** to select the `TeslaCam` directory (the input accepts folder uploads via `webkitdirectory`). The viewer rebuilds the TeslaCam hierarchy from the provided paths.

The app recognises the standard `TeslaCam/{RecentClips,SavedClips,SentryClips}/<timestamp>` structure, MP4 footage, and optional `event.json` metadata files. Metadata fields (`timestamp`, `city`, `est_lat`, `est_lon`, `reason`, `camera`) populate the event list and viewer; map links open in Google Maps when coordinates are present.

## Viewer Features

- Event filters for Recent, Saved, and Sentry clips with summary counters.
- Tesla-style layout: a large primary video pane with a selectable thumbnail rail for the other cameras.
- Automatic camera selection from metadata (camera index) with manual overrides per event.
- Reason descriptions for known Sentry and manual triggers, plus city readouts when available.
- Installable PWA with offline caching of the UI shell.

## Browser Notes

Safari and Firefox currently lack the File System Access API. They can still use the upload fallback, but live drive browsing remains unsupported. For long sessions, keep the site open while the USB drive stays connected to avoid repeating permission prompts.
